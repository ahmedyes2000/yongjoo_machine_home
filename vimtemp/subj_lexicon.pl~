#!/usr/bin/perl -w
use strict;
use Clair::Utils::Stem;

open IN, "subjclueslen1-HLTEMNLP05.tff" or die;
while (<IN>) {
    if (m/ word1=([\w\-]+) .* priorpolarity=([\w\-]+)$/) {
        my $w = $1;
        my $pol = $2;
        print "$w\t$pol\n";
    }
    else {
        print "error $_";
    }
}

sub stem{
    my $sent = shift;
    my $stemmer = new Clair::Utils::Stem;
    $sent = lc($sent);
    $sent =~ s/^\s+//g;
    $sent =~ s/\s+$//g;
    my @words = split /[^a-zA-Z0-9_\-']+/, $sent;
    my $stemmed = '';
    for my $i (0..2) {
        next if ($i > $#words);
        $words[$i] = "be" if ($words[$i] =~ m/\b(is|are|was|were)\b/);
        $words[$i] = "have" if ($words[$i] =~ m/\b(has|had)\b/);
        $words[$i] = "do" if ($words[$i] =~ m/\b(did|does)\b/);
        $stemmed = $stemmed." ".$stemmer->stem($words[$i]);
    }
    $stemmed =~ s/^\s+//g;
    return $stemmed;
}
